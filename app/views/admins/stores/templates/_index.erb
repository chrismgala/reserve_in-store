
<div>
  <%= form_for @store, url: {action: 'save_settings'}, html: {id: 'store_settings_form'} do |f| %>
    <input type="hidden" value="<%= admin_store_templates_path %>" name="next_url">
    <div>

      <%= render partial: 'admins/stores/shared/liquid_editor_section', locals: {
          heading: 'Reserve Modal',
          subheading: 'Customize the appearance and content of the New Reservation modal.',
          attr: 'reserve_modal_tpl',
          enabled: @store.reserve_modal_tpl_enabled?,
          db_value: @store.reserve_modal_tpl,
          value_in_use: @store.reserve_modal_tpl_in_use,
          default_value: @store.default_reserve_modal_tpl,
          preview_vars: @store.frontend_tpl_vars.merge({
                cart: {
                    items: [
                      {
                          product_title: 'Sample Product',
                          variant_title: "Color Blue / Size 3",
                          total: 12.34,
                          total_formatted: @store.currency(12.34)
                      }
                    ]
                }
          }),
          container_css_class: '',
          extra_css: '.reserveInStore-reserve-modal { padding-top: 12px; padding-bottom: 12px; position: relative; top: 8px; } .reserveInStore-reserve-close { top: 5px; }',
          frontend_mode: true
      } %>


      <%= render partial: 'admins/stores/shared/liquid_editor_section', locals: {
          heading: 'Choose Location Modal',
          subheading: 'Customize the content of the Choose Location modal.',
          attr: 'choose_location_modal_tpl',
          enabled: @store.choose_location_modal_tpl_enabled?,
          db_value: @store.choose_location_modal_tpl,
          value_in_use: @store.choose_location_modal_tpl_in_use,
          default_value: @store.default_choose_location_modal_tpl,
          preview_vars: @store.frontend_tpl_vars,
          container_css_class: '',
          extra_css: '.reserveInStore-reserve-modal { padding-top: 12px; padding-bottom: 12px; position: relative; top: 8px; } .reserveInStore-reserve-close { top: 5px; }',
          frontend_mode: true
      } %>


      <%= render partial: 'admins/stores/shared/email_template_section', locals: {
          heading: 'Reservation Confirmation Email',
          enabled: @store.customer_confirm_email_tpl_enabled?,
          subheading: 'Customize the reservation email that gets sent to customers using HTML.',
          attr: 'customer_confirm_email_tpl',
          db_value: @store.customer_confirm_email_tpl,
          value_in_use: @store.customer_confirm_email_tpl_in_use,
          default_value: @store.default_customer_confirm_email_tpl,
          preview_vars: Reservation.new(store: @store).preview_email_liquid_params,
          dont_use_global_css: true,
          preview_params: { email: true },
          sender_name_field: :customer_confirmation_sender_name,
          sender_name_field_default: 'Default: Reserve In-store',
          subject_field: :customer_confirmation_subject,
          subject_field_default: 'Default: In-Store Reservation Confirmation',
          f: f
          # container_css_class: 'reserveInStore-reserve-modal',
          # frontend_mode: true
      } %>


      <%= render partial: 'admins/stores/shared/email_template_section', locals: {
          heading: 'Location Notification Email',
          enabled: @store.location_notification_email_tpl_enabled?,
          subheading: 'Options for the notification email that gets sent to a store location email address when a new store reservation is created by a visitor.',
          attr: 'location_notification_email_tpl',
          db_value: @store.location_notification_email_tpl,
          value_in_use: @store.location_notification_email_tpl_in_use,
          default_value: @store.default_location_notification_email_tpl,
          preview_vars: Reservation.new(store: @store).preview_email_liquid_params,
          dont_use_global_css: true,
          preview_params: { email: true },
          sender_name_field: :location_notification_sender_name,
          sender_name_field_default: 'Default: Reserve In-store',
          subject_field: :location_notification_subject,
          subject_field_default: 'Default: New In-store Reservation',
          f: f
      } %>


      <%= render partial: 'admins/stores/shared/liquid_editor_section', locals: {
          heading: 'Product Page Reserve Button',
          enabled: @store.reserve_product_btn_tpl_enabled?,
          subheading: 'Customize the appearance of the "Reserve In-Store" button that appears in the product pages (if it is enabled).',
          attr: 'reserve_product_btn_tpl',
          db_value: @store.reserve_product_btn_tpl_in_use,
          value_in_use: @store.reserve_product_btn_tpl_in_use,
          default_value: @store.default_reserve_product_btn_tpl,
          extra_css: '.reserveInStore-btn-container { margin-top: 0 }',
          frontend_mode: true
      } %>


      <%= render partial: 'admins/stores/shared/liquid_editor_section', locals: {
          heading: 'Cart Reserve Button',
          enabled: @store.reserve_cart_btn_tpl_enabled?,
          subheading: 'Customize the appearance of the "Reserve In-Store" button that appears in the cart pages (if it is enabled).',
          attr: 'reserve_cart_btn_tpl',
          db_value: @store.reserve_cart_btn_tpl_in_use,
          value_in_use: @store.reserve_cart_btn_tpl_in_use,
          default_value: @store.default_reserve_cart_btn_tpl,
          extra_css: '.reserveInStore-btn-container { margin-top: 0 }',
          frontend_mode: true
      } %>


      <%= render partial: 'admins/stores/shared/liquid_editor_section', locals: {
          heading: 'Product Page Stock Status Indicator',
          enabled: @store.stock_status_tpl_enabled?,
          subheading: 'Customize the appearance of the "in stock @ location" stock status indicator for when it is enabled and active.',
          attr: 'stock_status_tpl',
          db_value: @store.stock_status_tpl_in_use,
          value_in_use: @store.stock_status_tpl_in_use,
          default_value: @store.default_stock_status_tpl,
          # extra_css: '.reserveInStore-btn-container { margin-top: 0 }',
          frontend_mode: true
      } %>


      <%= render partial: 'admins/stores/shared/custom_css', locals: {
          enabled: @store.custom_css_enabled?,
          db_value: @store.custom_css,
          value_in_use: @store.custom_css_in_use,
          default_value: ''
      } %>

    </div>

    <div class="row mb-4">
      <div class="col text-center">
        <div class="actions">
          <%= f.submit "Save", class: "btn save-btn btn-primary", id: "save_btn" %>
        </div>
      </div>
    </div>
  <% end %>
</div>
