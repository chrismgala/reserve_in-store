<!--Enable Shopify flash messages-->
<% content_for :javascript do %>
<script type="text/javascript">
  var eventName = typeof(Turbolinks) !== 'undefined' ? 'turbolinks:load' : 'DOMContentLoaded';

  if (!document.documentElement.hasAttribute("data-turbolinks-preview")) {
    document.addEventListener(eventName, function flash() {
      <% if flash[:notice] %>
        var successNotice = Toast.create(app, { message: '<%= j flash[:notice].html_safe %>' });
        successNotice.dispatch(Toast.Action.SHOW);
      <% end %>

      <% if flash[:error] %>
        var errorNotice = Toast.create(app, { message: '<%= j flash[:error].html_safe %>', isError: true });
        errorNotice.dispatch(Toast.Action.SHOW);
      <% end %>
                             
      document.removeEventListener(eventName, flash)
    });
  }
</script>
<% end %>
