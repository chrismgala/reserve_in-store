<!--not sure what to set to-->
<!--leave it here for now-->
<% content_for :javascript do %>
  <script type="text/javascript">
      ShopifyApp.ready(function(){
          ShopifyApp.Bar.initialize({ title: "Home" });
      });
  </script>
<% end %>
<!--END-->

<p>
  Showing <%= pluralize(@locations.count, 'location') %>.
</p>
<table class="table table-responsive table-striped">
  <thead>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Address</th>
    <th>Country</th>
    <th>State</th>
    <th>City</th>
    <th>Email</th>
    <th>Phone</th>
    <th></th>
    <th></th>
  </tr>
  </thead>
  <tbody>
  <% @locations.each do |location| %>
    <tr>
      <td><%= location.id %></td>
      <td><%= location.name %></td>
      <td><%= location.address %></td>
      <td><%= location.country %></td>
      <td><%= location.state %></td>
      <td><%= location.city %></td>
      <td><%= location.email %></td>
      <td><%= location.phone %></td>
      <td>
        <%= link_to 'Edit', edit_location_path(location), class: 'btn btn-info btn-xs', remote: true %>
      </td>
      <td>
        <%= link_to 'Delete', location, method: :delete, class: 'btn btn-danger btn-xs', data: { confirm: "Are you sure? Deleting this location will also delete all its reservations." } %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate @locations %>

<!--Edit Modal-->
<div id="edit_location_modal"></div>

<!-- Button trigger modal-->
<button class="btn btn-success btn-xs" data-toggle="modal" data-target="#locationModal">
  Add New Location
</button>

<!-- Modal -->
<div class="modal" id="locationModal" tabindex="-1" role="dialog" aria-labelledby="locationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <%= form_for :location, url: { action: "create" }, html: { class: 'form-group', id: 'locationCreateForm' } do |f| %>
      <div class="modal-header">
        <h4 class="modal-title">New Location</h4>
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
      </div>

      <div class="modal-body">
          <%= f.label :name %>
          <%= f.text_field :name, class: 'form-control', required: true %>

          <%= f.label :address %>
          <%= f.text_field :address, class: 'form-control' %>

          <%= f.label :country %>
          <%= f.text_field :country, class: 'form-control' %>

          <%= f.label :state %>
          <%= f.text_field :state, class: 'form-control' %>

          <%= f.label :city %>
          <%= f.text_field :city, class: 'form-control' %>

          <%= f.label :email %>
          <%= f.text_field :email, class: 'form-control', required: true, 'data-parsley-type': 'email' %>

          <%= f.label :phone %>
          <%= f.text_field :phone, class: 'form-control' %>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
          <%= f.submit "Save", class: "btn btn-primary"%>
        <% end %>
      </div>
    </div>
  </div>
</div>

<!--Parsley form validation-->
<script>
    $('#locationCreateForm').parsley();
</script>
